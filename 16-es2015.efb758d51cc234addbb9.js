(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{jrtg:function(l,n,u){"use strict";u.r(n);var t=u("kZht");class e{}var b=u("C9Ky"),o=u("unbb"),r=u("kiRk"),a=u("x8+N"),s=u("iHdW"),c=u("pOQZ"),i=u("An66"),d=u("4rR8"),m=(u("4HxU"),u("8lHc")),f=u("7tMs");class p{constructor(l){this.poll=l,this.displayedColumns=["name","artists","upvoteCount"],this.subs=new f.a}ngOnInit(){this.polling()}ngOnDestroy(){this.subs.unsubscribe()}polling(){this.subs.add(Object(m.a)(0,2e4).subscribe(l=>this.poll.loadAll()))}get dataSource$(){return this.poll.all$}}var h=u("D9S0"),D=t.rb({encapsulation:0,styles:[["table[_ngcontent-%COMP%]{width:100%}"]],data:{}});function C(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),t.sb(1,16384,null,0,o.e,[r.d,t.k],null,null),(l()(),t.Nb(-1,null,["Name"]))],null,null)}function g(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),t.sb(1,16384,null,0,o.a,[r.d,t.k],null,null),(l()(),t.Nb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.name)}))}function K(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),t.sb(1,16384,null,0,o.e,[r.d,t.k],null,null),(l()(),t.Nb(-1,null,["Artists"]))],null,null)}function P(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),t.sb(1,16384,null,0,o.a,[r.d,t.k],null,null),(l()(),t.Nb(2,null,[" "," "])),t.Jb(3,1)],null,(function(l,n){var u=t.Ob(n,2,0,l(n,3,0,t.Fb(n.parent,0),n.context.$implicit.artists));l(n,2,0,u)}))}function v(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),t.sb(1,16384,null,0,o.e,[r.d,t.k],null,null),(l()(),t.Nb(-1,null,["Votes"]))],null,null)}function L(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),t.sb(1,16384,null,0,o.a,[r.d,t.k],null,null),(l()(),t.Nb(2,null,[" "," "]))],null,(function(l,n){l(n,2,0,n.context.$implicit.upvoteCount)}))}function k(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,a.d,a.a)),t.Kb(6144,null,r.k,null,[o.g]),t.sb(2,49152,null,0,o.g,[],null,null)],null,null)}function w(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,2,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,null,null,a.e,a.b)),t.Kb(6144,null,r.m,null,[o.i]),t.sb(2,49152,null,0,o.i,[],null,null)],null,null)}function O(l){return t.Pb(2,[t.Hb(0,s.a,[]),(l()(),t.tb(1,0,null,null,1,"h3",[["class","title"]],null,null,null,null,null)),(l()(),t.Nb(-1,null,["Poll Results"])),(l()(),t.tb(3,0,null,null,52,"table",[["class","mat-elevation-z8 mat-table"],["mat-table",""]],null,null,null,a.f,a.c)),t.Kb(6144,null,r.o,null,[o.k]),t.sb(5,2342912,null,4,o.k,[t.r,t.h,t.k,[8,null],[2,c.b],i.d,d.a],{dataSource:[0,"dataSource"]},null),t.Lb(603979776,1,{_contentColumnDefs:1}),t.Lb(603979776,2,{_contentRowDefs:1}),t.Lb(603979776,3,{_contentHeaderRowDefs:1}),t.Lb(603979776,4,{_contentFooterRowDefs:1}),t.Hb(131072,i.b,[t.h]),(l()(),t.tb(11,0,null,null,12,null,null,null,null,null,null,null)),t.Kb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[o.c]),t.sb(13,16384,null,3,o.c,[],{name:[0,"name"]},null),t.Lb(603979776,5,{cell:0}),t.Lb(603979776,6,{headerCell:0}),t.Lb(603979776,7,{footerCell:0}),t.Kb(2048,[[1,4]],r.d,null,[o.c]),(l()(),t.ib(0,null,null,2,null,C)),t.sb(19,16384,null,0,o.f,[t.M],null,null),t.Kb(2048,[[6,4]],r.j,null,[o.f]),(l()(),t.ib(0,null,null,2,null,g)),t.sb(22,16384,null,0,o.b,[t.M],null,null),t.Kb(2048,[[5,4]],r.b,null,[o.b]),(l()(),t.tb(24,0,null,null,12,null,null,null,null,null,null,null)),t.Kb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[o.c]),t.sb(26,16384,null,3,o.c,[],{name:[0,"name"]},null),t.Lb(603979776,8,{cell:0}),t.Lb(603979776,9,{headerCell:0}),t.Lb(603979776,10,{footerCell:0}),t.Kb(2048,[[1,4]],r.d,null,[o.c]),(l()(),t.ib(0,null,null,2,null,K)),t.sb(32,16384,null,0,o.f,[t.M],null,null),t.Kb(2048,[[9,4]],r.j,null,[o.f]),(l()(),t.ib(0,null,null,2,null,P)),t.sb(35,16384,null,0,o.b,[t.M],null,null),t.Kb(2048,[[8,4]],r.b,null,[o.b]),(l()(),t.tb(37,0,null,null,12,null,null,null,null,null,null,null)),t.Kb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[o.c]),t.sb(39,16384,null,3,o.c,[],{name:[0,"name"]},null),t.Lb(603979776,11,{cell:0}),t.Lb(603979776,12,{headerCell:0}),t.Lb(603979776,13,{footerCell:0}),t.Kb(2048,[[1,4]],r.d,null,[o.c]),(l()(),t.ib(0,null,null,2,null,v)),t.sb(45,16384,null,0,o.f,[t.M],null,null),t.Kb(2048,[[12,4]],r.j,null,[o.f]),(l()(),t.ib(0,null,null,2,null,L)),t.sb(48,16384,null,0,o.b,[t.M],null,null),t.Kb(2048,[[11,4]],r.b,null,[o.b]),(l()(),t.ib(0,null,null,2,null,k)),t.sb(51,540672,null,0,o.h,[t.M,t.r],{columns:[0,"columns"]},null),t.Kb(2048,[[3,4]],r.l,null,[o.h]),(l()(),t.ib(0,null,null,2,null,w)),t.sb(54,540672,null,0,o.j,[t.M,t.r],{columns:[0,"columns"]},null),t.Kb(2048,[[2,4]],r.n,null,[o.j])],(function(l,n){var u=n.component;l(n,5,0,t.Ob(n,5,0,t.Fb(n,10).transform(u.dataSource$))),l(n,13,0,"name"),l(n,26,0,"artists"),l(n,39,0,"upvoteCount"),l(n,51,0,u.displayedColumns),l(n,54,0,u.displayedColumns)}),null)}function y(l){return t.Pb(0,[(l()(),t.tb(0,0,null,null,1,"iresa-portal-poll-result",[],null,null,null,O,D)),t.sb(1,245760,null,0,p,[h.a],null,null)],(function(l,n){l(n,1,0)}),null)}var M=t.pb("iresa-portal-poll-result",p,y,{},{},[]),N=u("ofez"),_=u("ApNh"),j=u("ENSU"),R=u("HPsB"),S=u("i6V3"),E=(u("hJoO"),u("YtkY"));class H{constructor(l){this.firestore=l}getSongList(l){const n=encodeURI(`documents/stations/${l}:runQuery`);return this.firestore.post(n,{structuredQuery:{from:[{collectionId:"songList"}],orderBy:[{field:{fieldPath:"upvoteCount"},direction:"DESCENDING"}]}}).pipe(Object(E.a)(l=>l.map(l=>l.document.fields)))}}var A=u("m56j"),$=u("UzRm"),F=u("DyCy"),I=u("D57K"),U=u("OBvt"),x=u("zQoo");let J=(()=>{class l{constructor(l,n,u){this.actions$=l,this.pollService=n,this.dataPersistence=u,this.loadPoll$=this.dataPersistence.fetch(U.b.LoadPoll,{run:(l,n)=>this.pollService.getSongList(n[x.a].selectedId).pipe(Object(E.a)(l=>new U.d(l))),onError:(l,n)=>(console.error("Error",n),new U.c(n))})}}return I.a([Object(F.b)(),I.b("design:type",Object)],l.prototype,"loadPoll$",void 0),l})();var T=u("bZ9o"),Q=u("1VvW");u.d(n,"PollResultModuleNgFactory",(function(){return z}));var z=t.qb(e,[],(function(l){return t.Cb([t.Db(512,t.j,t.bb,[[8,[b.a,M]],[3,t.j],t.x]),t.Db(4608,i.m,i.l,[t.t,[2,i.A]]),t.Db(4608,h.a,h.a,[N.n]),t.Db(1073742336,i.c,i.c,[]),t.Db(1073742336,r.p,r.p,[]),t.Db(1073742336,c.a,c.a,[]),t.Db(1073742336,_.l,_.l,[[2,_.d],[2,j.f]]),t.Db(1073742336,o.l,o.l,[]),t.Db(1073742336,R.a,R.a,[]),t.Db(1024,N.I,(function(){return[{}]}),[]),t.Db(1024,N.j,(function(){return[{key:"poll",reducerFactory:N.s,metaReducers:[],initialState:void 0}]}),[]),t.Db(1024,N.J,N.P,[t.q,N.I,N.j]),t.Db(1024,N.H,(function(){return[S.b]}),[]),t.Db(1024,N.K,(function(l){return[l]}),[N.H]),t.Db(1024,N.b,(function(l,n,u){return[N.Q(l,n,u)]}),[t.q,N.H,N.K]),t.Db(1073873408,N.o,N.o,[N.J,N.b,N.g,N.p]),t.Db(512,H,H,[A.b]),t.Db(512,$.a,$.a,[N.n,F.a]),t.Db(512,J,J,[F.a,H,$.a]),t.Db(1024,F.k,(function(l){return[F.g(l)]}),[J]),t.Db(1073742336,F.d,F.d,[F.e,F.k,[2,N.p],[2,N.o]]),t.Db(1073742336,T.a,T.a,[]),t.Db(1073742336,Q.s,Q.s,[[2,Q.y],[2,Q.o]]),t.Db(1073742336,e,e,[]),t.Db(1024,Q.m,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);